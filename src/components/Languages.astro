---
import i18n from '~/components/i18n/index.js';
import { getLanguageFromPath, SITE } from '~/config.js';
const locale = getLanguageFromPath(Astro.url);
const t = i18n[locale]

let url = Astro.url.pathname.substring(4)
let locales = SITE.locales
---

<!--- Language Select using Popover (no JS) --->
<details class="relative inline-block group">
    <summary
            class="focus:outline-none focus:ring-4 rounded-lg text-sm py-0.5 px-2 inline-flex items-center border
      text-slate-600 bg-stone-100 dark:bg-stone-600 border-stone-300 dark:border-stone-700 dark:text-stone-300
      hover:bg-white hover:border-blue-500 dark:hover:bg-stone-700 focus:ring-stone-200 dark:focus:ring-stone-700 cursor-pointer select-none"
    >
        <svg
                xmlns="http://www.w3.org/2000/svg" fill="currentColor"
                class="h-5 w-5 dark:placeholder-stone-400" viewBox="0 0 20 20">
            <path d="M7.75 2.75a.75.75 0 0 0-1.5 0v1.26a32.99 32.99 0 0 0-3.6.28.75.75 0 1 0 .2 1.48 31.55 31.55 0 0 1 5.85-.22 19.38 19.38 0 0 1-1.7 4A19.42 19.42 0 0 1 6 7.5a.75.75 0 0 0-1.39.58 20.93 20.93 0 0 0 1.5 2.9 19.61 19.61 0 0 1-3.83 4.16.75.75 0 1 0 .94 1.16A21.12 21.12 0 0 0 7 12.34l.29.4a.75.75 0 0 0 1.2-.92c-.21-.26-.4-.54-.6-.81a20.89 20.89 0 0 0 2.34-5.33l.92.1a.75.75 0 0 0 .2-1.48 32.83 32.83 0 0 0-3.6-.3V2.75z"></path><path fill-rule="evenodd" d="M13 8a.75.75 0 0 1 .67.41l4.25 8.5a.75.75 0 1 1-1.34.67l-.8-1.58h-5.57l-.79 1.58a.75.75 0 1 1-1.34-.66l4.25-8.5A.75.75 0 0 1 13 8zm2.04 6.5L13 10.43l-2.04 4.07h4.08z" clip-rule="evenodd"></path></svg>

        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
             stroke-width="1.5" stroke="currentColor"
             class="size-2 md:h-3 md:w-3 mt-1 text-sky-700 dark:text-sky-200">
            <path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5"></path>
        </svg>
    </summary>
    <nav
            class="absolute mt-1 z-50 rounded-md shadow-lg border px-2 py-1 bg-white border-blue-500 dark:bg-stone-800 dark:border-stone-400 min-w-full"
            tabIndex="-1"
    >
        {Object.keys(locales).map((iso) => (
                <a
                        href={`/${iso}/${url}`}
                        class="block cursor-pointer py-2 px-2 text-sm hover:rounded-lg
          text-slate-800 hover:text-white hover:bg-blue-500 border-b border-stone-200 dark:border-stone-700
          dark:text-stone-200 dark:hover:text-stone-100 dark:bg-stone-800 dark:hover:bg-stone-500 "
                >
                    {locales[iso]}
                </a>
        ))}
    </nav>
</details>